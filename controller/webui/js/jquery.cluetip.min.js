/*!
 * clueTip - v1.2.9 - 2013-07-14
 * http://plugins.learningjquery.com/cluetip/
 * Copyright (c) 2013 Karl Swedberg
 * Licensed MIT (http://www.opensource.org/licenses/mit-license.php)
 */
(function(t){t.cluetip={version:"1.2.9",template:["<div>",'<div class="cluetip-outer">','<h3 class="cluetip-title ui-widget-header ui-cluetip-header"></h3>','<div class="cluetip-inner ui-widget-content ui-cluetip-content"></div>',"</div>",'<div class="cluetip-extra"></div>',"</div>"].join(""),setup:{insertionType:"appendTo",insertionElement:"body"},defaults:{multiple:!1,width:275,height:"auto",cluezIndex:97,positionBy:"auto",topOffset:15,leftOffset:15,snapToEdge:!1,local:!1,localPrefix:null,localIdSuffix:null,hideLocal:!0,attribute:"rel",titleAttribute:"title",splitTitle:"",escapeTitle:!1,showTitle:!0,cluetipClass:"default",hoverClass:"",waitImage:!0,cursor:"help",arrows:!1,dropShadow:!0,dropShadowSteps:6,sticky:!1,mouseOutClose:!1,delayedClose:50,activation:"hover",clickThrough:!0,tracking:!1,closePosition:"top",closeText:"Close",truncate:0,fx:{open:"show",openSpeed:""},hoverIntent:{sensitivity:3,interval:50,timeout:0},onActivate:function(){return!0},onShow:function(){},onHide:function(){},ajaxCache:!0,ajaxProcess:function(t){return t=t.replace(/<(script|style|title)[^<]+<\/(script|style|title)>/gm,"").replace(/<(link|meta)[^>]+>/g,"")},ajaxSettings:{dataType:"html"},debug:!1}};var e,i="cluetip ui-widget ui-widget-content ui-cluetip",o={},a=0,l=0,n=function(t){return t.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;")};t.fn.attrProp=t.fn.prop||t.fn.attr,t.fn.cluetip=function(s,c){function u(e,i){var o=e||"";return i=i||"","object"==typeof i?t.each(i,function(t,e){o+="-"+t+"-"+e}):"string"==typeof i&&(o+=i),o}function r(e,i,o){var a="",l=i.dropShadow&&i.dropShadowSteps?+i.dropShadowSteps:0;if(t.support.boxShadow)return l&&(a="1px 1px "+l+"px rgba(0,0,0,0.5)"),e.css(t.support.boxShadow,a),!1;var n=e.find(".cluetip-drop-shadow");if(l==n.length)return n;n.remove();for(var s=[],c=0;l>c;)s[c++]='<div style="top:'+c+"px;left:"+c+'px;"></div>';return o=t(s.join("")).css({position:"absolute",backgroundColor:"#000",zIndex:g-1,opacity:.1}).addClass("cluetip-drop-shadow").prependTo(e)}var p,d,f,h,m,v;if("object"==typeof s&&(c=s,s=null),"destroy"==s)return this.each(function(){var e=t(this),i=e.data("cluetip");i&&(t(i.selector).remove(),t.removeData(this,"title"),t.removeData(this,"cluetip")),i.title&&e.attrProp("title",i.title),e.unbind(".cluetip").unbind("cluetipMoc")}),t('[id^="cluetip"]').length||t(document).unbind(".cluetip"),this;c=t.extend(!0,{},t.cluetip.defaults,c||{}),a++;var g,b=t.cluetip.backCompat||!c.multiple?"cluetip":"cluetip-"+a,x="#"+b,w=t.cluetip.backCompat?"#":".",y=t.cluetip.setup.insertionType,C=t.cluetip.setup.insertionElement||"body";y=/appendTo|prependTo|insertBefore|insertAfter/.test(y)?y:"appendTo",p=t(x),p.length||(p=t(t.cluetip.template)[y](C).attr("id",b).css({position:"absolute",display:"none"}),g=+c.cluezIndex,f=p.find(w+"cluetip-outer").css({position:"relative",zIndex:g}),d=p.find(w+"cluetip-inner"),h=p.find(w+"cluetip-title"),p.bind("mouseenter mouseleave",function(e){t(this).data("entered","mouseenter"===e.type)})),e=t("#cluetip-waitimage"),!e.length&&c.waitImage&&(e=t("<div></div>").attr("id","cluetip-waitimage").css({position:"absolute"}),e.insertBefore(p).hide());var S=(parseInt(p.css("paddingLeft"),10)||0)+(parseInt(p.css("paddingRight"),10)||0);return this.each(function(a){function b(){return!1}function y(t,e){var i=t.status;e.beforeSend(t.xhr,e),"error"==i?e[i](t.xhr,t.textStatus):"success"==i&&e[i](t.data,t.textStatus,t.xhr),e.complete(t.xhr,e.textStatus)}var I=this,T=t(this),k=t.extend(!0,{},c,t.metadata?T.metadata():t.meta?T.data():T.data("cluetip")||{}),j=!1,z=!1,B=null,P=k[k.attribute]||("href"==k.attribute?T.attr(k.attribute):T.attrProp(k.attribute)||T.attr(k.attribute)),O=k.cluetipClass;if(g=+k.cluezIndex,T.data("cluetip",{title:I.title,zIndex:g,selector:x,cursor:I.style.cursor||""}),k.arrows&&!p.find(".cluetip-arrows").length&&p.append('<div class="cluetip-arrows ui-state-default"></div>'),!P&&!k.splitTitle&&!s)return!0;k.local&&k.localPrefix&&(P=k.localPrefix+P),k.local&&k.hideLocal&&P&&t(P+":first").hide();var M,A,L,N,E,Y,H,D,R,X,W,$,q,Q,U=parseInt(k.topOffset,10),F=parseInt(k.leftOffset,10),G=isNaN(parseInt(k.height,10))?"auto":/\D/g.test(k.height)?k.height:k.height+"px",J=parseInt(k.width,10)||275,K=J+S+k.dropShadowSteps,V=this.offsetWidth,Z="title"!=k.attribute?T.attr(k.titleAttribute)||"":"";k.escapeTitle&&(Z=n(Z)),k.splitTitle&&(Q=Z.split(k.splitTitle),Z=k.showTitle||""===Q[0]?Q.shift():""),T.bind("mouseenter mouseleave",function(t){var e=T.data("cluetip");e.entered="entered"===t.type,T.data("cluetip",e)});var _=function(i){var n,r,v,g=k.onActivate.call(I,i);if(g===!1)return!1;if(z=!0,p=t(x).css({position:"absolute"}),f=p.find(w+"cluetip-outer"),d=p.find(w+"cluetip-inner"),h=p.find(w+"cluetip-title"),m=p.find(w+"cluetip-arrows"),p.removeClass().css({width:J}),P==T.attr("href")&&T.css("cursor",k.cursor),k.hoverClass&&T.addClass(k.hoverClass),N=Y=T.offset().top,E=N+T.innerHeight(),X=T.offset().left,"relative"===t(C).css("position")&&(X-=t(C)[0].getBoundingClientRect().left),V=T.innerWidth(),i.type==focus?($=X+V/2+F,p.css({left:W}),D=Y+U):($=i.pageX,D=i.pageY),"area"!=I.tagName.toLowerCase()&&(L=t(document).scrollTop(),q=t(window).width()),"fixed"==k.positionBy?(W=V+X+F,p.css({left:W})):(W=V>X&&X>K||X+V+K+F>q?X-K-F:V+X+F,("area"==I.tagName.toLowerCase()||"mouse"==k.positionBy||V+K>q)&&($+20+K>q?(p.addClass("cluetip-"+O),W=$-K-F>=0?$-K-F-parseInt(p.css("marginLeft"),10)+parseInt(d.css("marginRight"),10):$-K/2):W=$+F),n=0>W?i.pageY+U:i.pageY,(0>W||"bottomTop"==k.positionBy||"topBottom"==k.positionBy)&&(W=$+K/2>q?q/2-K/2:Math.max($-K/2,0))),m.css({zIndex:T.data("cluetip").zIndex+1}),p.css({left:W,zIndex:T.data("cluetip").zIndex}),A=t(window).height(),s)"function"==typeof s&&(s=s.call(I)),d.html(s),te(n);else if(Q){var b=Q.length;if(d.html(b?Q[0]:""),b>1)for(var S=1;b>S;S++)d.append('<div class="split-body">'+Q[S]+"</div>");te(n)}else if(k.local||0===P.indexOf("#")){if(k.local){var B=t(P+(/^#\S+$/.test(P)?"":":eq("+a+")")).clone(!0).show();k.localIdSuffix&&B.attr("id",B[0].id+k.localIdSuffix),d.html(B),te(n)}}else if(/\.(jpe?g|tiff?|gif|png)(?:\?.*)?$/i.test(P))d.html('<img src="'+P+'" alt="'+Z+'" />'),te(n);else{var M=k.ajaxSettings.beforeSend,H=k.ajaxSettings.error,R=k.ajaxSettings.success,G=k.ajaxSettings.complete;v=u(P,k.ajaxSettings.data);var _={cache:k.ajaxCache,url:P,beforeSend:function(t,i){M&&M.call(I,t,p,d,i),f.children().empty(),k.waitImage&&e.css({top:D+20,left:$+20,zIndex:T.data("cluetip").zIndex-1}).show()},error:function(t,e){c.ajaxCache&&!o[v]&&(o[v]={status:"error",textStatus:e,xhr:t}),z&&(H?H.call(I,t,e,p,d):d.html("<i>sorry, the contents could not be loaded</i>"))},success:function(t,e,i){c.ajaxCache&&!o[v]&&(o[v]={status:"success",data:t,textStatus:e,xhr:i}),j=k.ajaxProcess.call(I,t),"object"==typeof j&&null!==j&&(Z=j.title,j=j.content),z&&(R&&R.call(I,t,e,p,d),d.html(j))},complete:function(i,o){G&&G.call(I,i,o,p,d);var a=d[0].getElementsByTagName("img");l=a.length;for(var s=0,c=a.length;c>s;s++)a[s].complete&&l--;l?t(a).bind("load.ct error.ct",function(){l--,0===l&&(e.hide(),t(a).unbind(".ct"),z&&te(n))}):(e.hide(),z&&te(n))}};r=t.extend(!0,{},k.ajaxSettings,_),o[v]?y(o[v],r):t.ajax(r)}},te=function(e){var o,a,l,n=Z||k.showTitle&&"&nbsp;",s="",c="",u=!1,g={bottom:function(t){t.appendTo(d)},top:function(t){t.prependTo(d)},title:function(t){t.prependTo(h)}};if(p.addClass("cluetip-"+O),k.truncate){var b=d.text().slice(0,k.truncate)+"...";d.html(b)}n?h.show().html(n):h.hide(),k.sticky&&(g[k.closePosition]&&(o=t('<div class="cluetip-close"><a href="#">'+k.closeText+"</a></div>"),g[k.closePosition](o),o.bind("click.cluetip",function(){return ie(),!1})),k.mouseOutClose&&(T.unbind("mouseleave.cluetipMoc"),p.unbind("mouseleave.cluetipMoc"),("both"==k.mouseOutClose||"cluetip"==k.mouseOutClose||k.mouseOutClose===!0)&&p.bind("mouseleave.cluetipMoc",oe),("both"==k.mouseOutClose||"link"==k.mouseOutClose)&&T.bind("mouseleave.cluetipMoc",oe))),f.css({zIndex:T.data("cluetip").zIndex,overflow:"auto"==G?"visible":"auto",height:G}),M="auto"==G?Math.max(p.outerHeight(),p.height()):parseInt(G,10),H=Y,R=L+A,u=$>W&&Math.max(W,0)+K>$,"fixed"==k.positionBy?H=Y-k.dropShadowSteps+U:"topBottom"==k.positionBy||"bottomTop"==k.positionBy||u?("topBottom"==k.positionBy?c=R>Y+M+U&&M+U>D-L?"bottom":"top":("bottomTop"==k.positionBy||u)&&(c=Y+M+U>R&&D-L>M+U?"top":"bottom"),k.snapToEdge?"top"==c?H=N-M-U:"bottom"==c&&(H=E+U):"top"==c?H=D-M-U:"bottom"==c&&(H=D+U)):H=Y+M+U>R?M>=A?L:R-M-U:"block"==T.css("display")||"area"==I.tagName.toLowerCase()||"mouse"==k.positionBy?e-U:Y-k.dropShadowSteps,""===c&&(c=X>W?"left":"right"),a=" clue-"+c+"-"+O+" cluetip-"+O,"rounded"==O&&(a+=" ui-corner-all"),p.css({top:H+"px"}).attrProp({className:i+a}),k.arrows?(/(left|right)/.test(c)&&(l=p.height()-m.height(),s=W>=0&&e>0?Y-H-k.dropShadowSteps:0,s=l>s?s:l,s+="px"),m.css({top:s}).show()):m.hide(),v=r(p,k),v&&v.length&&v.hide().css({height:M,width:J,zIndex:T.data("cluetip").zIndex-1}).show(),B||p.hide(),clearTimeout(B),B=null,p[k.fx.open](k.fx.openSpeed||0),t.fn.bgiframe&&p.bgiframe(),k.onShow.call(I,p,d)},ee=function(){z=!1,e.hide(),(!k.sticky||/click|toggle/.test(k.activation))&&(k.delayedClose>0?(clearTimeout(B),B=null,B=setTimeout(ie,k.delayedClose)):(ie(),clearTimeout(B))),k.hoverClass&&T.removeClass(k.hoverClass)},ie=function(e){var i=e&&e.data("cluetip")?e:T,o=i.data("cluetip")&&i.data("cluetip").selector,a=o||"div.cluetip",l=t(a),n=l.find(w+"cluetip-inner"),s=l.find(w+"cluetip-arrows");l.hide().removeClass(),k.onHide.call(i[0],l,n),o&&(i.removeClass("cluetip-clicked"),T.css("cursor",T.data("cluetip").cursor)),o&&Z&&i.attrProp(k.titleAttribute,Z),k.arrows&&s.css({top:""}),v&&v.hide()},oe=function(){var t=this;clearTimeout(B),B=setTimeout(function(){var e=T.data("cluetip").entered,i=p.data("entered"),o=!1;"both"==k.mouseOutClose&&(e||i)?o=!0:k.mouseOutClose!==!0&&"cluetip"!=k.mouseOutClose||!i?"link"==k.mouseOutClose&&e&&(o=!0):o=!0,o||ie.call(t)},k.delayedClose)};if(t(document).unbind("hideCluetip.cluetip").bind("hideCluetip.cluetip",function(e){ie(t(e.target))}),/click|toggle/.test(k.activation))T.bind("click.cluetip",function(e){return p.is(":hidden")||!T.is(".cluetip-clicked")?(_(e),t(".cluetip-clicked").removeClass("cluetip-clicked"),T.addClass("cluetip-clicked")):ee(e),!1});else if("focus"==k.activation)T.bind("focus.cluetip",function(t){T.attrProp("title",""),_(t)}),T.bind("blur.cluetip",function(t){T.attrProp("title",T.data("cluetip").title),ee(t)});else{T[k.clickThrough?"unbind":"bind"]("click.cluetip",b);var ae=function(t){if(k.tracking){var e=W-t.pageX,i=H?H-t.pageY:Y-t.pageY;T.bind("mousemove.cluetip",function(t){p.css({left:t.pageX+e,top:t.pageY+i})})}};t.fn.hoverIntent&&k.hoverIntent?T.hoverIntent({sensitivity:k.hoverIntent.sensitivity,interval:k.hoverIntent.interval,over:function(t){_(t),ae(t)},timeout:k.hoverIntent.timeout,out:function(t){ee(t),T.unbind("mousemove.cluetip")}}):T.bind("mouseenter.cluetip",function(t){_(t),ae(t)}).bind("mouseleave.cluetip",function(t){ee(t),T.unbind("mousemove.cluetip")}),T.bind("mouseover.cluetip",function(){T.attrProp("title","")}).bind("mouseleave.cluetip",function(){T.attrProp("title",T.data("cluetip").title)})}}),this},function(){t.support=t.support||{};for(var e=document.createElement("div"),i=e.style,o=["boxShadow"],a=["moz","Moz","webkit","o"],l=0,n=o.length;n>l;l++){var s=o[l],c=s.charAt(0).toUpperCase()+s.slice(1);if(i[s]!==void 0)t.support[s]=s;else for(var u=0,r=a.length;r>u;u++)if(i[a[u]+c]!==void 0){t.support[s]=a[u]+c;break}}e=null}(),t.fn.cluetip.defaults=t.cluetip.defaults})(jQuery);